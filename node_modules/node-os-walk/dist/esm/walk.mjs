// src/walk.ts
import path from "path";
import { readDir } from "./read-dir.mjs";
async function* walk(root, options = {}) {
  var _a, _b;
  (_a = options.followSymlinks) != null ? _a : options.followSymlinks = false;
  (_b = options.ignoreErrors) != null ? _b : options.ignoreErrors = false;
  const result = await readDir(root, options.ignoreErrors);
  yield result;
  const [currentRoot, subDirectories] = result;
  for (const directory of subDirectories) {
    if (!options.followSymlinks && directory.isSymbolicLink())
      continue;
    const subDirPath = path.resolve(currentRoot, directory.name);
    for await (const result2 of walk(subDirPath, options)) {
      yield result2;
    }
  }
}
export {
  walk
};
